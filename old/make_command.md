# 【Ubuntu】繰り返し作業をシンプルに！あなただけのコマンドを作成する方法

## はじめに

Ubuntu環境で作業をしていると、繰り返し行う作業をスクリプト化し、独自のコマンドとして実行できると非常に便利です。

本記事では、全ユーザーが使えるコマンドの作り方から、特定のユーザーのみが使えるコマンドの作り方まで、Ubuntuで独自のコマンドを作成する方法を詳しく説明します。

また、これらのコマンドをシステムが認識するために必要なパス設定についても解説します。

この記事で、あなた自身の独自コマンドを作成し実行することができるようになるはずです！

## /usr/local/binについて

次にスクリプトを作成する前に、`/usr/local/bin`ディレクトリについて解説します。これはLinuxシステム上でローカルにインストールされたオプションの実行可能ファイルを格納するためのディレクトリです。このディレクトリに格納されたスクリプトは、パスが設定されているため、任意の場所から直接実行することが可能です。

## /usr/local/binへの移動

`cd`コマンドを使って`/usr/local/bin`ディレクトリに移動しましょう。ただし、このディレクトリへのアクセスには管理者権限が必要な場合があります。

```bash
cd /usr/local/bin
```

## 全ユーザーが使えるスクリプトの作成

まずは、実行したいコマンドをスクリプトとして作成します。
この例では`/usr/local/bin`ディレクトリに`myscript`という名前のスクリプトを作成します。

```bash
sudo touch myscript
```

任意のテキストエディタを用いてスクリプトを作成しましょう。

```bash
sudo nano myscript
```

そして、以下のような内容を記述します。

```bash
#!/bin/bash

echo "Hello, this is my custom command!"
```

## 実行権限の付与

スクリプトを作成したら、それを実行可能な状態にします。これには`chmod`コマンドを使用します。

```bash
sudo chmod +x myscript
```

## パスを通す?

ここではすでに`/usr/local/bin`という一般的なパスにスクリプトを置いているため、追加でパスを設定する必要はありません。このディレクトリはデフォルトでシステムのパスに含まれているからです。

```bash
myscript
```

## ユーザーのみが使えるコマンド

特定のユーザーのみが使えるコマンドを作りたい場合や、システム全体に影響を与えることなくコマンドを作成したい場合、HOMEディレクトリ以下にスクリプトを作成することが推奨されます。以下では、HOMEディレクトリ下の`bin`ディレクトリを作成し、その中にスクリプトを作成します。

まずは`bin`ディレクトリを作成しましょう。

```bash
mkdir ~/bin
```

次にそのディレクトリに移動し、スクリプトを作成します。

```bash
cd ~/bin
nano myscript
```

そして、以下のような内容を記述します。

```bash
#!/bin/bash

echo "Hello from my home directory!"
```

## パス設定

次に、作成したスクリプトを実行できるようにパスを設定します。`.bashrc`または`.bash_profile`ファイルにパス設定を追加します。

```bash
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
```

その後、ターミナルを閉じて再開するか、以下のコマンドを実行して変更を適用します。

```bash
source ~/.bashrc
```

これで`~/bin`ディレクトリに置かれたスクリプトを、そのファイル名だけで実行することができます。スクリプトには実行権限が必要ですので、忘れずに付与してください。

```bash
chmod +x ~/bin/myscript
```


## .bashrcと.bash_profileについて

`.bashrc`と`.bash_profile`は、bashシェルが新しいセッションを開始するときに読み込む設定ファイルです。これらのファイルには、エイリアス、関数、パス設定、環境変数など、シェルの動作をカスタマイズする設定が含まれます。

### .bashrc

`.bashrc`は、インタラクティブな非ログインシェル（例えば新しいターミナルウィンドウを開いたとき）で読み込まれます。ここには一般的に、新しいシェルセッションごとに必要な設定を記述します。

### .bash_profile

一方、`.bash_profile`はログインシェル（例えばシステムにSSHでログインしたとき）で読み込まれます。ログイン時に一度だけ読み込まれるため、ここには環境変数や一度だけ実行する必要があるコマンドを記述します。

### どちらを使うべきか

この二つのファイルの主な違いは、それらが読み込まれるシェルの種類です。ログインシェルであるか、非ログインシェルであるかにより、読み込まれるファイルが変わります。

Ubuntuなどの多くのLinuxディストリビューションでは、新しいターミナルウィンドウを開くときに`.bashrc`が読み込まれます。そのため、特に理由がなければ、環境変数やパスの設定は`.bashrc`に記述するのが一般的です。

しかし、Mac OS Xのような一部のシステムでは、ターミナルウィンドウを開くときに`.bash_profile`が読み込まれます。このようなシステムでは、`.bash_profile`に設定を記述し、さらにその中で`.bashrc`を明示的に読み込む設定を追加することが一般的です。

具体的には、`.bash_profile`に以下のような行を追加します。

```bash
if [ -f ~/.bashrc ]; then
   source ~/.bashrc
fi
```

この設定により、`.bash_profile`が読み込まれるときに`.bashrc`も同時に読み込まれるようになります。


## まとめ

以上が、Ubuntuで独自のコマンドを作成する方法です。これにより、繰り返し行う作業を一つのコマンドにまとめ、効率的に作業を行うことができます。もしエラーが発生した場合は、スクリプトの内容やパーミッション、そしてパス設定を再度確認してみてください。

しかし、コマンドの作成やシステム設定の変更は注意が必要です。
誤った操作がシステム全体に影響を及ぼす可能性があるため、自信がない場合はテスト環境で試してみてください。

最後まで読んでいただきありがとうございます。記事に誤りなどありましたら教えていただけると、とても嬉しいです！

あなたの作業をより効率的に、そして楽しく進めてください！


<!-- This .md was created using GPT. The prompts are: -->

<!--
貴方はベテランエンジニアでプロの編集者です。具体的かつ専門的な記事の執筆をしてください。

Ubuntuでコマンドを作成したいです。
手順と具体的な内容をマークダウンで記述し、記事を作成してください。

下記は要件です

  - `はじめに`と`まとめ`は記述しない
  - パスを通す
  - .shをつけずにコマンドを実行できるようにする
-->

<!-- 
「はじめに」と「スクリプトの作成」の間に次の内容を１項で追加します

 - /usr/local/binに関する解説
 - そこにcdによって移動する手順 
-->

<!-- 
/usr/local/bin以外にスクリプトを作成しパスを追加する手順を追記します。差分のみ出力してください。

  - HOMEディレクトリ以下にある任意のディレクトリを使用する例
  - 現在のユーザーのみに適用されるコマンド作成手順
-->

<!-- 
`.bashrc`と`.bash_profile`の解説と違いを追記
-->

<!-- New Chat -->

<!-- 
貴方はベテランエンジニアでプロの編集者です。
ブログ記事について指定のタスクを行なってください。

  - `はじめに`と`まとめ`を記述する
  - 誤字脱字、特にアルファベット表記について統一を行う
  - 追加するべき項目の提案

ここから下記が記事の内容です。
 -->

<!-- 
ブログ記事の誤字脱字やアルファベット表記については、この記事全体で統一されており、大きな誤りは見受けられませんでした。

追加するべき項目として、以下のようなものが考えられます：

- 特定のタスクを自動化するためのスク

リプト例： 例えば、ファイルのバックアップ、ログファイルの削除など、一部のルーチンタスクを自動化するためのスクリプトの例を追加すると、読者にとって有用かもしれません。
- 独自コマンドのデバッグ方法： スクリプトが予期しない挙動を示した場合のトラブルシューティング手順を追加すると、読者の助けになるでしょう。
- スクリプトにパラメータを渡す方法： スクリプトに動的なパラメータを渡す方法を追加すると、より高度なスクリプト作成が可能になります。
 -->
<!-- 
下記のブログ記事を作成しました。いい題名を書籍名に基づいて20項考えてください。
 -->